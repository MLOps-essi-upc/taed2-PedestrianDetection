
<?xml version="1.0" encoding="utf-8"?><testsuites><testsuite name="pytest" errors="0" failures="4" skipped="0" tests="5" time="5.993" timestamp="2023-10-27T20:46:57.785142" hostname="MacBook-Pro-de-Claudia.local"><testcase classname="test_api" name="test_index" time="0.016" /><testcase classname="test_api" name="test_return_bb" time="0.961"><failure message="assert 500 == 200">def test_return_bb():
        with open(test_image_path, "rb") as image_file:
            files = {"image": ("african.jpeg", image_file)}
            response = client.post("/bb", files=files)
            json = response.json()
            assert json["message"] == "Request failed"
            assert json["method"] == "POST"
&gt;           assert json["status-code"] == 200
E           assert 500 == 200

test_api.py:40: AssertionError</failure></testcase><testcase classname="test_api" name="test_draw_bb" time="0.988"><failure message="AssertionError: assert 'application/json' == 'image/png'&#10;  - image/png&#10;  + application/json">def test_draw_bb():
        with open(test_image_path, "rb") as image_file:
            files = {"image": ("african.jpeg", image_file)}
            response = client.post("/bb_draw", files=files)
            assert response.status_code == 200
&gt;           assert response.headers["content-type"] == "image/png"
E           AssertionError: assert 'application/json' == 'image/png'
E             - image/png
E             + application/json

test_api.py:62: AssertionError</failure></testcase><testcase classname="test_api" name="test_draw_masks" time="0.951"><failure message="AssertionError: assert 'application/json' == 'image/png'&#10;  - image/png&#10;  + application/json">def test_draw_masks():
        with open(test_image_path, "rb") as image_file:
            files = {"image": ("african.jpeg", image_file)}
            response = client.post("/masks", files=files)
            assert response.status_code == 200
&gt;           assert response.headers["content-type"] == "image/png"
E           AssertionError: assert 'application/json' == 'image/png'
E             - image/png
E             + application/json

test_api.py:79: AssertionError</failure></testcase><testcase classname="test_api" name="test_error_case" time="0.043"><failure message="AssertionError: assert 'error' in {'data': {'error': 'cannot identify image file &lt;_io.BytesIO object at 0x14d097740&gt;'}, 'message': 'Request failed', 'method': 'POST', 'status-code': 500, ...}">def test_error_case():
        # Create an invalid image (e.g., a text file) and send it in the request
        with open("invalid_image.txt", "w") as text_file:
            text_file.write("This is not an image.")
    
        with open("invalid_image.txt", "rb") as image_file:
            files = {"image": ("invalid_image.txt", image_file)}
            response = client.post("/bb_draw", files=files)
    
        # Ensure the response indicates an error
        json = response.json()
&gt;       assert "error" in json
E       AssertionError: assert 'error' in {'data': {'error': 'cannot identify image file &lt;_io.BytesIO object at 0x14d097740&gt;'}, 'message': 'Request failed', 'method': 'POST', 'status-code': 500, ...}

test_api.py:102: AssertionError</failure></testcase></testsuite></testsuites>


